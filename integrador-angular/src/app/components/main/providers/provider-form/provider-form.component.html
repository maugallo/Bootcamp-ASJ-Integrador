<div class="container">
    <div class="row">
        <div class="col-auto col-lg-2"></div>
        <div class="col-12 col-lg-8">
            <section>
                <div class="my-5">
                    <h2 class="text-center mb-2 display-5 fw-semibold font-blue">{{formTitle}} <i class="bi bi-person-fill-add"></i></h2>
                </div>
                <p><a class=" fs-6 font-blue" [routerLink]="['/providers']">VOLVER</a></p>
            </section>
            <section class="card p-5 rounded-0 card-border-blue">
                <form #providersForm="ngForm" (ngSubmit)="onSubmit(providersForm)">
                    <!-- Datos de proveedor -->
                    <div class="row">
                        <div class="col font-blue subtitle mb-3">
                            <h2 class="fs-5">Datos de proveedor</h2>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col d-flex justify-content-between mx-2">
                            <div class="me-2">
                                <label for="code" class="form-label">Código</label>
                                <input class="form-control" #code="ngModel" [(ngModel)]="provider.code"
                                    name="code" type="text" placeholder="AB12" required minlength="4" maxlength="10" [disabled]="param">
                                <!-- Mensaje de error -->
                                <div *ngIf="code.touched && code.errors?.['required']" class="text-danger ">
                                    <p><small>Este campo no puede estar vacío</small></p>
                                </div>
                                <div *ngIf="code.touched && code.errors?.['minlength']" class="text-danger">
                                    <p><small>No pueden haber menos de 4 caracteres</small></p>
                                </div>
                            </div>
                            <div class="me-2">
                                <label class="form-label" for="companyName">Razón Social</label>
                                <input id="companyName" #companyName="ngModel" class="form-control"
                                    [(ngModel)]="provider.companyName" name="companyName" type="text"
                                    placeholder="Ingrese razón social" required maxlength="60"
                                    pattern="^[a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ ]+$">
                                <!-- Mensaje de error -->
                                <div *ngIf="companyName.touched && companyName.errors?.['required']"
                                    class="text-danger ">
                                    <p><small>Este campo no puede estar vacío</small></p>
                                </div>
                                <div *ngIf="companyName.touched && companyName.errors?.['pattern']" class="text-danger">
                                    <p><small>No pueden haber caracteres especiales</small></p>
                                </div>
                            </div>
                            <div class="me-2">
                                <label for="sector" class="form-label">Rubro</label>
                                <input id="sector" #sector="ngModel" type="text" [(ngModel)]="provider.sector"
                                    name="sector" class="form-control" placeholder="Ingrese el rubro" required
                                    minlength="5" maxlength="60" pattern="^[a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ ]+$">
                                <!-- Mensaje de error -->
                                <div *ngIf="sector.touched && sector.errors?.['required']" class="text-danger ">
                                    <p><small>Este campo no puede estar vacío</small></p>
                                </div>
                                <div *ngIf="sector.touched && sector.errors?.['minlength']" class="text-danger">
                                    <p><small>No pueden haber menos de 5 caracteres</small></p>
                                </div>
                                <div *ngIf="sector.touched && sector.errors?.['pattern']" class="text-danger">
                                    <p><small>No pueden haber caracteres especiales</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-5">
                        <div class="col">
                            <div class="w-100">
                                <label for="website" class="form-label">Sitio Web</label>
                                <input type="text" name="website" [(ngModel)]="provider.website" class="form-control"
                                    placeholder="https://example.com">
                            </div>
                        </div>
                    </div>
                    <div class="row mt-5">
                        <div class="row">
                            <div class="col d-flex justify-content-center">
                                <div class="me-2 w-75">
                                    <label for="street" class="form-label">Calle</label>
                                    <input type="text" #street="ngModel" name="street" [(ngModel)]="provider.street"
                                        class="form-control" placeholder="Ingrese la calle" required minlength="5"
                                        pattern="^[a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ ]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="street.touched && street.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="street.touched && street.errors?.['minlength']" class="text-danger">
                                        <p><small>No pueden haber menos de 5 caracteres</small></p>
                                    </div>
                                    <div *ngIf="street.touched && street.errors?.['pattern']" class="text-danger">
                                        <p><small>No pueden haber caracteres especiales</small></p>
                                    </div>
                                </div>
                                <div class="me-2">
                                    <label for="streetNum" class="form-label">Número</label>
                                    <input  type="text" #num="ngModel" name="streetNum" [(ngModel)]="provider.num"
                                        class="form-control" placeholder="0123" required maxlength="5"
                                        pattern="^[0-9]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="num.touched && num.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="num.touched && num.errors?.['pattern']" class="text-danger ">
                                        <p><small>Este campo solo acepta números</small></p>
                                    </div>
                                </div>
                                <div>
                                    <label for="zipCode" class="form-label">Código Postal</label>
                                    <input type="text" #zipCode="ngModel" name="zipCode"
                                        [(ngModel)]="provider.zipCode" class="form-control" placeholder="C.P"
                                        required minlength="4" maxlength="6" pattern="^[0-9]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="zipCode.touched && zipCode.errors?.['required']"
                                        class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="zipCode.touched && zipCode.errors?.['minlength']"
                                        class="text-danger ">
                                        <p><small>La longitud no debe ser menor a 4 caracteres</small></p>
                                    </div>
                                    <div *ngIf="zipCode.touched && zipCode.errors?.['pattern']"
                                        class="text-danger ">
                                        <p><small>Este campo solo acepta números</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col d-flex">
                                <div class="w-50 me-2">
                                    <label for="country" class="form-label">Pais</label>
                                    <select type="select" #country="ngModel" name="country" class="form-select"
                                        (change)="chooseCountry()" [(ngModel)]="provider.country" required>
                                        <option *ngFor="let country of countrySelect" value="{{country.name}}">
                                            {{country.name}}</option>
                                    </select>
                                    <!-- Mensaje de error -->
                                    <div *ngIf="country.touched && country.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                </div>
                                <div class="w-50 me-2">
                                    <label for="province" class="form-label">Provincia</label>
                                    <select type="text" #province="ngModel" name="province" class="form-select"
                                        (change)="chooseState()" [(ngModel)]="provider.province" required>
                                        <option *ngFor="let state of stateSelect" value="{{state.name}}">{{state.name}}</option>
                                        <option *ngIf="stateSelect.length === 0" value="Sin Provincia">--------</option>
                                    </select>
                                    <!-- Mensaje de error -->
                                    <div *ngIf="province.touched && province.errors?.['required']"
                                        class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                </div>

                                <div class="w-50">
                                    <label for="locality" class="form-label">Localidad</label>
                                    <select type="text" #locality="ngModel" name="locality" class="form-select" [(ngModel)]="provider.locality" required>
                                        <option *ngFor="let locality of localitySelect" value="{{locality.name}}">{{locality.name}}</option>
                                        <option *ngIf="localitySelect.length === 0" value="Sin Localidad">--------</option>
                                    </select>
                                    <!-- Mensaje de error -->
                                    <div *ngIf="locality.touched && locality.errors?.['required']"
                                        class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Datos fiscales -->
                    <div class="row">
                        <div class="col font-blue subtitle mt-5">
                            <h2 class="fs-5 ">Datos fiscales</h2>
                        </div>
                    </div>
                    <div class="row mt-5">
                        <div class="col d-flex justify-content-evenly ">
                            <div class="me-2 w-25">
                                <label for="cuit" class="form-label">CUIT</label>
                                <input type="text" #cuit="ngModel" [(ngModel)]="provider.cuit" name="cuit"
                                    class="form-control" placeholder="XX-XXXXXXXX-X" required
                                    pattern="^[0-9]{2}-[0-9]{8}-[0-9]$" [disabled]="param">
                                <!-- Mensaje de error -->
                                <div *ngIf="cuit.touched && cuit.errors?.['required']" class="text-danger ">
                                    <p><small>Este campo no puede estar vacío</small></p>
                                </div>
                                <div *ngIf="cuit.touched && cuit.errors?.['pattern']" class="text-danger ">
                                    <p><small>Este campo debe cumplir el formato numérico XX-XXXXXXXX-X</small></p>
                                </div>
                            </div>
                            <div class="w-75 text-center">
                                <label for="vatCondition" class="form-label">Condición IVA</label>
                                <div class="d-flex justify-content-evenly">
                                    <label for="responsable" class="form-check-label">
                                        <span class="me-2">Resp. Inscripto</span>
                                        <input class="form-check-input" [(ngModel)]="provider.vat" id="responsable"
                                            type="radio" name="vatCondition" value="Responsable Inscripto">
                                    </label>
                                    <label for="monotributista" class="form-check-label">
                                        <span class="me-2">Monotributista</span>
                                        <input class="form-check-input" [(ngModel)]="provider.vat" id="monotributista"
                                            type="radio" name="vatCondition" value="Monotributista">
                                    </label>
                                    <label for="exento" class="form-check-label">
                                        <span class="me-2">Exento</span>
                                        <input class="form-check-input" [(ngModel)]="provider.vat" id="exento"
                                            type="radio" name="vatCondition" value="Exento">
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Datos de contacto -->
                    <div class="row">
                        <div class="col font-blue subtitle mt-5">
                            <h2 class="fs-5">Datos de contacto</h2>
                        </div>
                    </div>
                    <div class="row mt-5">
                        <div class="row">
                            <div class="col d-flex justify-content-center mx-2">
                                <div class="me-2 w-50 ">
                                    <label class="form-label" for="name">Nombre</label>
                                    <input class="form-control" #name="ngModel" [(ngModel)]="provider.name"
                                        name="name" type="text" placeholder="Ingrese el nombre" required
                                        maxlength="50" pattern="^[a-zA-ZñÑáéíóúÁÉÍÓÚ ]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="name.touched && name.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="name.touched && name.errors?.['pattern']" class="text-danger ">
                                        <p><small>Este campo solo acepta letras</small></p>
                                    </div>
                                </div>
                                <div class="me-2 w-50">
                                    <label for="sirname" class="form-label">Apellido</label>
                                    <input type="text" #sirname="ngModel" [(ngModel)]="provider.sirname"
                                        name="sirname" class="form-control" placeholder="Ingrese el apellido" required
                                        maxlength="50" pattern="^[a-zA-ZñÑáéíóúÁÉÍÓÚ ]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="sirname.touched && sirname.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="sirname.touched && sirname.errors?.['pattern']" class="text-danger ">
                                        <p><small>Este campo solo acepta letras</small></p>
                                    </div>
                                </div>
                                <div class="w-50">
                                    <label for="telephone" class="form-label">Teléfono</label>
                                    <input id="telephone" #telephone="ngModel" [(ngModel)]="provider.telephone"
                                        type="text" name="telephone" class="form-control" placeholder="1234567890"
                                        required pattern="^[0-9]+$" minlength="7" maxlength="12">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="telephone.touched && telephone.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="telephone.touched && telephone.errors?.['pattern']" class="text-danger ">
                                        <p><small>Este campo solo acepta números</small></p>
                                    </div>
                                    <div *ngIf="telephone.touched && telephone.errors?.['minlength']"
                                        class="text-danger ">
                                        <p><small>No pueden haber menos de 7 caracteres</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-5">
                            <div class="col d-flex justify-content-around  mx-2">
                                <div class="me-2 w-50">
                                    <label for="email" class="form-label">Email</label>
                                    <input id="txtEmail" #email="ngModel" type="email" [(ngModel)]="provider.email"
                                        name="email" class="form-control" placeholder="example@gmail.com" required email
                                        pattern=".*(\.com)$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="email.touched && email.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="email.touched && (email.errors?.['email'] || email.errors?.['pattern']) "
                                        class="text-danger ">
                                        <p><small>Este campo debe cumplir el formato nombre&commat;ejemplo.com</small>
                                        </p>
                                    </div>
                                </div>
                                <div class="w-auto">
                                    <label for="role" class="form-label">Rol</label>
                                    <input type="text" #role="ngModel" [(ngModel)]="provider.role" name="role"
                                        class="form-control" placeholder="Ingrese el rol" required maxlength="50"
                                        pattern="^[a-zA-Z0-9ñÑáéíóúÁÉÍÓÚ ]+$">
                                    <!-- Mensaje de error -->
                                    <div *ngIf="role.touched && role.errors?.['required']" class="text-danger ">
                                        <p><small>Este campo no puede estar vacío</small></p>
                                    </div>
                                    <div *ngIf="role.touched && role.errors?.['pattern']" class="text-danger">
                                        <p><small>No pueden haber caracteres especiales</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Botón -->
                    <div class="text-end mt-4">
                        <button class="btn btn-add rounded-0 " [disabled]="providersForm.invalid" type="submit">{{buttonName}}</button>
                    </div>
                </form>
            </section>
        </div>
        <div class="col-auto col-lg-2"></div>
    </div>
</div>